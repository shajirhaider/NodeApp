<div class="mat-elevation-z8">


  <div class="flex-container flex-container-sb">
    <div>
      <mat-form-field appearance="fill">
        <mat-label>Search here</mat-label>
        <input
          matInput
          (keyup)="applyFilter()"
          [(ngModel)]="searchText"
        >
        <mat-icon matPrefix>search</mat-icon>

      </mat-form-field>
    </div>

    <div>
      <button
        *ngIf="showAddButton"
        mat-mini-fab
        color="secondary"
        (click)="onClickAdd()"
      ><mat-icon>add</mat-icon></button>
      <button
        style=" margin-left: 5px; margin-right: 5px;"
        mat-mini-fab
        color="primary"
        (click)="onClickExport()"
        [disabled]="disableExport"
      ><mat-icon>cloud_download</mat-icon></button>
      <button
        mat-mini-fab
        color="secondary"
        (click)="onSortReset()"
      >
      <mat-icon>
        <span class="material-symbols-outlined">ink_eraser</span>
      </mat-icon>
    </button>
    </div>
  </div>
  <div class="table-parent-container">
    @if(!remoteDataLoaded){

    <div class="loading-shade">
      <mat-spinner></mat-spinner>
    </div>
    }
    <div class="table-container">

      <table
      [class.equal-width-table]="tableId == 'myTableEmTpl'"
        mat-table
        [dataSource]="dataSource"
        matSort
        matSortStart="asc"
        [id]="tableId"
      >

        <ng-container
          *ngFor="let column of columns"
          [matColumnDef]="column.def"
        >
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
          > {{ column.header }} </th>
          <td
            mat-cell
            *matCellDef="let monitoring"
          > @if (column.pipe && column.pipe==='date') {
            {{ monitoring[column.def]|date}}
            }
            @else {
              @if(monitoring[column.def] === true || monitoring[column.def] === false){
                {{ monitoring[column.def] === true ? 'Yes' :'No'  }}
              }
              @else{
                <span [innerHTML]="monitoring[column.def]"></span>
              }
            }
          </td>
        </ng-container>
        <ng-container
          *ngIf="showActions && showActions.length>0"
          matColumnDef="actions"
        >
          <th
            mat-header-cell
            *matHeaderCellDef
            class="center-text-important"
          > Action </th>
          <td
            mat-cell
            *matCellDef="let row"
            class="center-text-important"
          >

            <div class="action-buttons">

              <button
                *ngIf="showActions.includes('edit')"
                style="color: rgb(54, 74, 175);"
                (click)="onClickEdit(row)"
              >
                <mat-icon>edit_note</mat-icon>
              </button>
              <!-- <button
                style="color: green;"
                (click)="onDownload(fileMeta.id)"
              >
                <mat-icon>download</mat-icon>
              </button> -->
              <button
                *ngIf="showActions.includes('delete')"
                style="color: red;"
                (click)="onClickDelete(row)"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </td>

        </ng-container>
        <tr
          mat-header-row
          *matHeaderRowDef="displayedColumns"
        ></tr>

        <tr 
          mat-row
          *matRowDef="let monitoring; columns: displayedColumns;"
        ></tr>

      </table>

    </div>
  </div>
  <mat-paginator
    [pageSizeOptions]="[5, 10, 20,50,100]"
    showFirstLastButtons
    [pageSize]="10"
    aria-label="Select page"
  >
  </mat-paginator>

</div>
